define(["gitee"],(function(gitee){return{data:()=>({lsKeyList:[]}),methods:{initLsKey(){for(let key in localStorage)localStorage.hasOwnProperty(key)&&(this.lsKeyList.push(key),this.lsKeyList.sort())},clearStorage(){confirm("确认清空缓存？")&&(gitee.clearAllCache(),this.refresh())},refresh(){this.lsKeyList=[],this.initLsKey()}},mounted(){$('div[flag="storageView"]').accordion({exclusive:!1,onOpening(){let oldVal;if(!$(this).find("textarea").val()){let content=localStorage.getItem($(this).attr("lsKey"));try{let data=JSON.parse(content);$(this).find("textarea").val(JSON.stringify(data,null,4))}catch(e){$(this).find("textarea").val(content)}}}}),this.initLsKey()},template:'\n        <div class="ui container mt-5 d-flex flex-column segment">\n            <div class="mb-3">\n                <button class="ui button mt-2" @click="refresh">\n                    <i class="refresh icon"></i>刷新缓存\n                </button>\n                <button class="ui button mt-2" @click="clearStorage">\n                    <i class="download icon"></i>清空缓存\n                </button>\n                <button class="ui button mt-2 disabled">\n                    <i class="download icon"></i>下载缓存\n                </button>\n            </div>\n            <div flag="storageView" class="ui styled accordion w-100">\n                <template v-for="lsKey in lsKeyList">\n                  <div class="title">\n                    <i class="dropdown icon"></i>\n                    {{lsKey}}\n                  </div>\n                  <div class="content ui from" :lsKey="lsKey">\n                    <div class="transition hidden ui form">\n                        <div class="field">\n                            <textarea readonly></textarea>\n                        </div>\n                    </div>\n                  </div>\n                </template>\n            </div>\n        </div>\n        '}}));