function requireJsConfig(){let localLibs=["header","utils","gitee","editor","bookmarks","base64","home","storageView","sysLog","monacoSupport"],localPath={};for(let lib of localLibs)localPath[lib]=isProd?lib+".min":lib;let localCssList=["util","wyd2021"],localCssPath=[];for(let css of localCssList)localCssPath.push(isProd?`css!/css/min/${css}`+".min.css":`css!/css/${css}.css`);require.config({map:{"*":{css:"/cdn/css.min.js"}},deps:["vue","vueRouter","axios","ELEMENT","jquery","semantic","css!/cdn/element-ui/lib/theme-chalk/index.css","css!/cdn/element-ui/lib/theme-chalk/display.css","css!/cdn/semantic/semantic.min.css",...localCssPath],paths:{vue:"/cdn/vue/vue.min",vueRouter:"/cdn/vue/vue-router",axios:"/cdn/axios.min",ELEMENT:"/cdn/element-ui/lib/index",jquery:"/cdn/bootstrap/jquery.min",semantic:"/cdn/semantic/semantic.min",vs:"/cdn/monaco-editor/min/vs","vue-markdown":"/cdn/vue/vue-markdown.min",markdownIt:"/cdn/markdown-it.min",...localPath},shim:{semantic:{deps:["jquery"]}}})}function initApp(){require(["vue","gitee","ELEMENT","vueRouter"],(function(Vue,gitee,element,VueRouter){axiosInit(),Vue.use(element),Vue.use(VueRouter),gitee.initState().then(data=>{vueMixin(),startVueApp()})}))}function startVueApp(){require(["vue","gitee","vueRouter","header","ELEMENT"],(function(Vue,gitee,VueRouter,Header,element){window.wyd2021=new Vue({el:"#root",router:vueRouterInit(gitee,VueRouter,element),components:{"app-header":Header},mounted(){gitee.refreshToken()},template:'\n            <div class="d-flex flex-column">\n                <div>\n                    <app-header ref="header"/>\n                </div>\n                <div class="flex-grow-1 wyd-app-router">\n                    <keep-alive>\n                        <router-view></router-view>\n                    </keep-alive>\n                </div>\n                <div>\n                    <el-backtop target="body" :visibility-height="100"></el-backtop>\n                </div>\n            </div>\n        '})}))}function vueRouterInit(gitee,VueRouter,element){const routeNames=["home","bookmarks","bookmarks.chrome","editor","login","storageView","sysLog"],routes=[{path:"/",redirect:"/bookmarks.chrome"}];for(let routeName of routeNames)routes.push({path:`/${routeName}`,component:resolve=>{require([routeName],data=>{data.cps?resolve(data.cps):resolve(data)})}});let autoRouteList=gitee.getWydConfig().autoRouteList;if(autoRouteList)try{for(let autoRoute of autoRouteList){let meRoute=`ar_${autoRoute}`;routes.push({path:`/${meRoute}`,component:resolve=>{gitee.getFileContent(`cps/${autoRoute}.js`).then(data=>{let script=document.createElement("script");script.type="text/javascript",script.append(data),document.body.appendChild(script),require([meRoute],data=>{data.cps?resolve(data.cps):resolve(data)})})}})}}catch(e){console.error(e)}let router=new VueRouter({routes:routes}),loading,loadedRoute=[];return router.beforeEach((to,from,next)=>{loadedRoute.includes(to.path)||(loading=element.Loading.service({lock:!0,text:"Loading~~~",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.9)"}),setTimeout(()=>{loading.close()},3e3)),next()}),router.afterEach((to,from)=>{loadedRoute.includes(to.path)||(loadedRoute.push(to.path),loading&&loading.close())}),router}function axiosInit(){require(["axios","utils"],(function(axios,utils){axios.interceptors.request.use((function(config){return config}),(function(error){return Promise.reject(error)})),axios.interceptors.response.use((function(response){return 200===response.status?response.data:response}),(function(error){return error.response&&401===error.response.status&&utils.goLogin(),Promise.reject(error)}))}))}function vueMixin(){require(["vue","utils"],(Vue,utils)=>{Vue.mixin({mounted(){if(!this.$el.getAttribute)return;let wydFlag=this.$el.getAttribute("wydFlag");wydFlag&&utils.setVueCps(wydFlag,this)}})})}requireJsConfig(),initApp();