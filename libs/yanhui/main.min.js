function requireJsConfig(){let e=["header","utils","gitee","editor","bookmarks","base64","login","home","storageView","sysLog","monacoSupport","bookmarks.chrome"],t={};for(let n of e)t[n]=isProd?n+".min":n;let n=["util","wyd2021"],i=[];for(let e of n)i.push(isProd?`css!/css/${e}.min.css`:`css!/css/${e}.css`);require.config({map:{"*":{css:"/cdn/css.min.js"}},deps:["vue","vueRouter","axios","ELEMENT","jquery","semantic","css!/cdn/element-ui/lib/theme-chalk/index.css","css!/cdn/element-ui/lib/theme-chalk/display.css","css!/cdn/semantic/semantic.min.css",...i],paths:{vue:"/cdn/vue/vue.min",vueRouter:"/cdn/vue/vue-router",axios:"/cdn/axios.min",ELEMENT:"/cdn/element-ui/lib/index",jquery:"/cdn/bootstrap/jquery.min",semantic:"/cdn/semantic/semantic.min",vs:"/cdn/monaco-editor/min/vs","vue-markdown":"/cdn/vue/vue-markdown.min",markdownIt:"/cdn/markdown-it.min",...t},shim:{semantic:{deps:["jquery"]}}})}function initApp(){require(["vue","gitee","ELEMENT","vueRouter","axios","utils"],(function(e,t,n,i,o,s){axiosInit(o,s),e.use(n),e.use(i),t.refreshToken((()=>{t.initState().then((e=>{vueMixin(),startVueApp()}))}))}))}function startVueApp(){require(["vue","gitee","vueRouter","header","ELEMENT"],(function(e,t,n,i,o){window.wyd2021=new e({el:"#root",router:vueRouterInit(t,n,o),components:{"app-header":i},mounted(){},template:'\n            <div class="d-flex flex-column">\n                <div>\n                    <app-header ref="header"/>\n                </div>\n                <div class="flex-grow-1 wyd-app-router">\n                    <keep-alive>\n                        <router-view></router-view>\n                    </keep-alive>\n                </div>\n                <div>\n                    <el-backtop target="body" :visibility-height="100"></el-backtop>\n                </div>\n            </div>\n        '})}))}function vueRouterInit(e,t,n){const i=["home","bookmarks","bookmarks.chrome","editor","login","storageView","sysLog"],o=[{path:"/",redirect:"/editor"}];for(let e of i)o.push({path:`/${e}`,component:t=>{require([e],(e=>{e.cps?t(e.cps):t(e)}))}});let s=e.getWydConfig().autoRouteList;if(s)try{for(let t of s){let n=`ar_${t}`;o.push({path:`/${n}`,component:i=>{e.getFileContent(`cps/${t}.js`).then((e=>{let t=document.createElement("script");t.type="text/javascript",t.append(e),document.body.appendChild(t),require([n],(e=>{e.cps?i(e.cps):i(e)}))}))}})}}catch(e){}let r,u=new t({routes:o}),c=[];return u.beforeEach(((e,t,i)=>{c.includes(e.path)||(r=n.Loading.service({lock:!0,text:"Loading~~~",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.9)"}),setTimeout((()=>{r.close()}),3e3)),i()})),u.afterEach(((e,t)=>{c.includes(e.path)||(c.push(e.path),r&&r.close())})),u}function axiosInit(e,t){e.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return 200===e.status?e.data:e}),(function(e){return e.response&&401===e.response.status&&t.goLogin(),Promise.reject(e)}))}function vueMixin(){require(["vue","utils"],((e,t)=>{e.mixin({mounted(){if(!this.$el.getAttribute)return;let e=this.$el.getAttribute("wydFlag");e&&t.setVueCps(e,this)}})}))}localStorage.getItem("wyd-login-state")?(requireJsConfig(),initApp()):window.location.href=isProd?"/login.min.html":"/login.html";