function requireJsConfig(){let e=["home","bookmarks"],t={};for(let n of e)t[n]=isProd?n+".min":n;let n=[],a=[];for(let e of n)a.push(isProd?`css!/css/${e}.min.css`:`css!/css/${e}.css`);require.config({map:{"*":{css:"/cdn/css.min.js"}},deps:["vue","vueRouter","axios","ELEMENT","css!/cdn/element-ui/lib/theme-chalk/index.css","css!/cdn/element-ui/lib/theme-chalk/display.css","css!/libs/public/public.css",...a],paths:{vue:"/cdn/vue/vue.min",vueRouter:"/cdn/vue/vue-router",axios:"/cdn/axios.min",ELEMENT:"/cdn/element-ui/lib/index",gitee:"/libs/yanhui/gitee.min",utils:"/libs/yanhui/utils.min",base64:"/libs/yanhui/base64.min",sysLog:"/libs/yanhui/sysLog.min",...t},shim:{}})}function initApp(){require(["vue","gitee","ELEMENT","vueRouter","axios","utils"],(function(e,t,n,a,i,s){axiosInit(i,s),e.use(n),e.use(a),t.initState().then((e=>{vueMixin(),startVueApp()}))}))}function startVueApp(){require(["vue","gitee","vueRouter","ELEMENT"],(function(e,t,n,a){t.getFileContent("config/public.json",!1,!0).then((i=>{!function(i){window.wyd2021=new e({el:"#root",router:vueRouterInit(t,n,a,i),data:()=>({activePath:"",currentTheme:"",config:{base:{},routes:[],themes:[],theme:{},autoRouteList:[]}}),methods:{route(e){this.$router.push(e)},loadTheme(e){let t=document.createElement("link");t.rel="stylesheet",t.href=`/cdn/bootswatch/bootstrap.${e}.min.css`,document.body.appendChild(t),this.currentTheme=e},setTheme(e){localStorage.setItem("index-theme",e),window.location.reload()},clearCache(){let e=[];for(let t in localStorage)localStorage.hasOwnProperty(t)&&t&&-1!==t.indexOf("@")&&e.push(t);confirm("确认清空所有缓存？")&&(e.length>0?utils.confirm(`存在已修改未上传的文件，是否继续清空缓存？【${e.join("；")}】`).then((()=>{t.clearAllCache(),location.reload()})).catch((()=>{})):(t.clearAllCache(),location.reload()))}},watch:{$route(e,t){this.activePath=e.path}},mounted(){this.config=i,document.title=i.base.title;let e=localStorage.getItem("index-theme");this.loadTheme(e||i.theme.default)},template:'\n                <div>\n                    <nav class="navbar navbar-expand-lg" :class="\'navbar-\'+config.theme.navbar+\' bg-\'+config.theme.bg+(config.theme.navpills?\' nav-pills\':\'\')">\n                        <div class="container-fluid">\n                            <a class="navbar-brand" href="#">{{config.base.title}}</a>\n                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor03" aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation">\n                                <span class="navbar-toggler-icon"></span>\n                            </button>\n                        \n                            <div class="collapse navbar-collapse" id="navbarColor03">\n                                <ul class="navbar-nav me-auto">\n            \n        \n                                    <template v-for="route in config.routes">\n                                        <li v-if="typeof route[1] === \'string\'" class="nav-item">\n                                            <a class="nav-link" :class="activePath===route[1].substr(1)?\'active\':\'\'" :href="route[1]">\n                                                <i v-if="route[2]" :class="\'fa fa-\'+route[2]"></i>\n                                                <span>{{route[0]}}</span>\n                                            </a>\n                                        </li>\n                                        <li v-else class="nav-item dropdown">\n                                            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">\n                                                <i v-if="route[2]" :class="\'fa fa-\'+route[2]"></i>\n                                                <span>{{route[0]}}</span>\n                                            </a>\n                                            <div class="dropdown-menu">\n                                            <a v-for="subRoute in route[1]" class="dropdown-item" :class="activePath===subRoute[1].substr(1)?\'active\':\'\'" :href="subRoute[1]" :target="subRoute[1].startsWith(\'#\')?\'_self\':\'_blank\'">\n                                                <i v-if="subRoute[2]" :class="\'fa fa-\'+subRoute[2]"></i>\n                                                <span>{{subRoute[0]}}</span>\n                                            </a>\n                                            </div>\n                                        </li>\n                                    </template>\n        \n                                    <li class="nav-item dropdown">\n                                        <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">\n                                            <i class="fa fa-sun-o"></i>\n                                            Themes\n                                        </a>\n                                        <div class="dropdown-menu">\n                                            <a v-for="oneTheme in config.themes" :class="currentTheme==oneTheme[0]?\'active\':\'\'" class="dropdown-item yh-pointer" @click="setTheme(oneTheme[0])">\n                                                {{oneTheme[0]}} <i v-if="oneTheme[1]" :class="\'fa fa-\'+oneTheme[1]"></i>\n                                            </a>\n                                        </div>\n                                    </li>\n                                    \n                                </ul>\n                                <div class="d-flex">\n                                    <i class="text-primary fa fa-refresh fa-2x yh-pointer" @click="clearCache"></i>\n                                </div>\n                            </div>\n                        </div>\n                    </nav>\n                    <div class="flex-grow-1">\n                        <keep-alive>\n                            <router-view></router-view>\n                        </keep-alive>\n                    </div>\n                    <div>\n                        <el-backtop target="body" :visibility-height="100"></el-backtop>\n                    </div>\n                </div>\n            '})}(i)}))}))}function vueRouterInit(e,t,n,a){const i=["home","bookmarks"],s=[{path:"/",redirect:a.base.defaultRoute}];for(let e of i)s.push({path:`/${e}`,component:t=>{require([e],(e=>{e.cps?t(e.cps):t(e)}))}});let o=a.autoRouteList;if(o)try{for(let t of o){let n=`ar_${t}`;s.push({path:`/${n}`,component:a=>{e.getFileContent(`cps/${t}.js`).then((e=>{let t=document.createElement("script");t.type="text/javascript",t.append(e),document.body.appendChild(t),require([n],(e=>{e.cps?a(e.cps):a(e)}))}))}})}}catch(e){}let r,l=new t({routes:s}),u=[];return l.beforeEach(((e,t,a)=>{u.includes(e.path)||(r=n.Loading.service({lock:!0,text:"Loading~~~",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.9)"}),setTimeout((()=>{r.close()}),3e3)),a()})),l.afterEach(((e,t)=>{u.includes(e.path)||(u.push(e.path),r&&r.close())})),l}function axiosInit(e,t){e.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return 200===e.status?e.data:e}),(function(e){return e.response&&401===e.response.status&&t.goLogin(),Promise.reject(e)}))}function vueMixin(){require(["vue","utils"],((e,t)=>{e.mixin({mounted(){if(!this.$el.getAttribute)return;let e=this.$el.getAttribute("wydFlag");e&&t.setVueCps(e,this)}})}))}fetch(`/libs/public/layout${isProd?".min":""}.html`).then((e=>e.text())).then((e=>{document.querySelector("#layout").innerHTML=e,requireJsConfig(),initApp()}));